<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ensemble Partial Least Squares for Model Applicability Domain Evaluation — enpls.ad • enpls</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Ensemble Partial Least Squares for Model Applicability Domain Evaluation — enpls.ad" />

<meta property="og:description" content="Model applicability domain evaluation with ensemble partial least squares." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83197262-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">enpls</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/enpls.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/road2stat/enpls">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Ensemble Partial Least Squares for Model Applicability Domain Evaluation</h1>
    </div>

    
    <p>Model applicability domain evaluation with ensemble partial least squares.</p>
    

    <pre class="usage"><span class='fu'>enpls.ad</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>xtest</span>, <span class='no'>ytest</span>, <span class='kw'>maxcomp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>cvfolds</span> <span class='kw'>=</span> <span class='fl'>5L</span>,
  <span class='kw'>space</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"sample"</span>, <span class='st'>"variable"</span>), <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"mc"</span>, <span class='st'>"boot"</span>),
  <span class='kw'>reptimes</span> <span class='kw'>=</span> <span class='fl'>500L</span>, <span class='kw'>ratio</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>1L</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Predictor matrix of the training set.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Response vector of the training set.</p></td>
    </tr>
    <tr>
      <th>xtest</th>
      <td><p>List, with the i-th component being the i-th test set's
predictor matrix (see example code below).</p></td>
    </tr>
    <tr>
      <th>ytest</th>
      <td><p>List, with the i-th component being the i-th test set's
response vector (see example code below).</p></td>
    </tr>
    <tr>
      <th>maxcomp</th>
      <td><p>Maximum number of components included within each model.
If not specified, will use the maximum number possible (considering
cross-validation and special cases where n is smaller than p).</p></td>
    </tr>
    <tr>
      <th>cvfolds</th>
      <td><p>Number of cross-validation folds used in each model
for automatic parameter selection, default is <code>5</code>.</p></td>
    </tr>
    <tr>
      <th>space</th>
      <td><p>Space in which to apply the resampling method.
Can be the sample space (<code>"sample"</code>) or
the variable space (<code>"variable"</code>).</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Resampling method. <code>"mc"</code> (Monte-Carlo resampling)
or <code>"boot"</code> (bootstrapping). Default is <code>"mc"</code>.</p></td>
    </tr>
    <tr>
      <th>reptimes</th>
      <td><p>Number of models to build with Monte-Carlo resampling
or bootstrapping.</p></td>
    </tr>
    <tr>
      <th>ratio</th>
      <td><p>Sampling ratio used when <code>method = "mc"</code>.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Integer. Number of CPU cores to use.
Default is <code>1</code> (not parallelized).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing:</p><ul>
<li><p><code>tr.error.mean</code> -
absolute mean prediction error for training set</p></li>
<li><p><code>tr.error.median</code> -
absolute median prediction error for training set</p></li>
<li><p><code>tr.error.sd</code> -
prediction error sd for training set</p></li>
<li><p><code>tr.error.matrix</code> -
raw prediction error matrix for training set</p></li>
<li><p><code>te.error.mean</code> -
list of absolute mean prediction error for test set(s)</p></li>
<li><p><code>te.error.median</code> -
list of absolute median prediction error for test set(s)</p></li>
<li><p><code>te.error.sd</code> -
list of prediction error sd for test set(s)</p></li>
<li><p><code>te.error.matrix</code> -
list of raw prediction error matrix for test set(s)</p></li>
</ul>

    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Note that for <code>space = "variable"</code>, <code>method</code> could
only be <code>"mc"</code>, since bootstrapping in the variable space
will create duplicated variables, and that could cause problems.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='st'>"alkanes"</span>)
<span class='no'>x</span> <span class='kw'>=</span> <span class='no'>alkanes</span>$<span class='no'>x</span>
<span class='no'>y</span> <span class='kw'>=</span> <span class='no'>alkanes</span>$<span class='no'>y</span>

<span class='co'># training set</span>
<span class='no'>x.tr</span> <span class='kw'>=</span> <span class='no'>x</span>[<span class='fl'>1</span>:<span class='fl'>100</span>, ]
<span class='no'>y.tr</span> <span class='kw'>=</span> <span class='no'>y</span>[<span class='fl'>1</span>:<span class='fl'>100</span>]

<span class='co'># two test sets</span>
<span class='no'>x.te</span> <span class='kw'>=</span> <span class='fu'>list</span>(
  <span class='st'>"test.1"</span> <span class='kw'>=</span> <span class='no'>x</span>[<span class='fl'>101</span>:<span class='fl'>150</span>, ],
  <span class='st'>"test.2"</span> <span class='kw'>=</span> <span class='no'>x</span>[<span class='fl'>151</span>:<span class='fl'>207</span>, ])
<span class='no'>y.te</span> <span class='kw'>=</span> <span class='fu'>list</span>(
  <span class='st'>"test.1"</span> <span class='kw'>=</span> <span class='no'>y</span>[<span class='fl'>101</span>:<span class='fl'>150</span>],
  <span class='st'>"test.2"</span> <span class='kw'>=</span> <span class='no'>y</span>[<span class='fl'>151</span>:<span class='fl'>207</span>])

<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>ad</span> <span class='kw'>=</span> <span class='fu'>enpls.ad</span>(
  <span class='no'>x.tr</span>, <span class='no'>y.tr</span>, <span class='no'>x.te</span>, <span class='no'>y.te</span>,
  <span class='kw'>space</span> <span class='kw'>=</span> <span class='st'>"variable"</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"mc"</span>,
  <span class='kw'>ratio</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>reptimes</span> <span class='kw'>=</span> <span class='fl'>50</span>)
<span class='fu'>print</span>(<span class='no'>ad</span>)</div><div class='output co'>#&gt; Model Applicability Domain Evaluation by ENPLS
#&gt; ---
#&gt; Absolute mean prediction error for each training set sample:
#&gt;   [1]  0.933956741  0.174824636  0.024280569  1.170418390  0.153135040
#&gt;   [6]  1.076265538  0.002029500  0.629965136  0.371806761  0.510763165
#&gt;  [11]  0.216289579  0.240917860  3.493910352  0.690537725  0.170287638
#&gt;  [16]  3.198136356  0.850965664  0.062513536  0.755995622  1.171682806
#&gt;  [21]  0.141895938  0.321023315  0.623504243  0.151459352  0.464318601
#&gt;  [26]  0.736167599  0.004542222  0.706324645  0.768282784  0.431135808
#&gt;  [31]  1.754660893  0.718575773  1.394784412  0.841094027  0.839062680
#&gt;  [36]  1.153837468  0.472396578  1.153258092  1.321065714  1.109554055
#&gt;  [41]  2.312295129  2.295773495  1.330044255  1.204205092  1.401988648
#&gt;  [46]  1.415077449  1.116359169  0.791210168  2.095529097  2.126855923
#&gt;  [51]  1.494085750  0.051076260  3.773702570  0.992903798  0.434182362
#&gt;  [56]  0.787253759  2.455621515  2.512709129  1.385266789  0.645650296
#&gt;  [61]  0.778074449  3.407957331 14.302981978  5.906056736  0.732195839
#&gt;  [66]  1.119671815  2.445386904  1.280116401  1.713638698  2.161974614
#&gt;  [71]  0.742675703  1.167791685  1.045598766  2.253394905  1.476225247
#&gt;  [76]  2.101221444  0.344177960  1.689881219  1.967091024  0.603766764
#&gt;  [81]  0.861057511  0.500570721  5.487320055  0.479293521  2.584291991
#&gt;  [86]  0.852263220  2.094277693  1.932637842  1.512922272  0.347917974
#&gt;  [91]  1.544533207  3.747137763  3.342190128  3.907526529  6.376483040
#&gt;  [96]  1.787677298  3.510304757  1.973607466  1.671188871  0.972430242
#&gt; ---
#&gt; Prediction error SD for each training set sample:
#&gt;   [1] 0.6020729 1.1109317 0.5709207 0.4788374 0.5799492 0.3041271 0.4403202
#&gt;   [8] 0.2652545 0.3996291 0.2317465 0.3250620 0.2598722 0.6640500 0.3166683
#&gt;  [15] 0.1744827 0.5062090 0.2735922 0.2383369 0.3581228 0.3597947 0.3258230
#&gt;  [22] 0.2289847 0.4063172 0.3540365 0.2002951 0.4510573 0.3903182 0.2040832
#&gt;  [29] 0.4927274 0.4006020 0.3234694 0.2058263 0.5260375 0.2593022 0.1887034
#&gt;  [36] 0.2382415 0.5652798 0.3914926 0.2923978 0.2402676 0.5505460 0.2662303
#&gt;  [43] 0.3086442 0.7318001 0.4426458 0.5081038 0.7721576 0.4578035 0.3384900
#&gt;  [50] 0.3324957 0.3973875 0.2561214 0.3876233 0.3109661 0.2667963 0.4301501
#&gt;  [57] 0.3693648 0.3578658 0.5101343 0.3503337 0.3967363 0.2304282 0.4420977
#&gt;  [64] 0.2921458 0.2732953 0.5603824 0.3218922 0.3277753 0.4326325 0.4274726
#&gt;  [71] 0.2076231 0.3005963 0.3446352 0.3163251 0.3886199 0.3966705 0.5201554
#&gt;  [78] 0.5208405 0.3259874 0.4479218 0.4593539 0.1878024 0.3497973 0.3403728
#&gt;  [85] 0.2659548 0.4048602 0.1756538 0.4430610 0.2550817 0.4707580 0.4203280
#&gt;  [92] 0.3187072 0.8201504 0.5890336 0.2743511 0.2552916 0.3453270 0.4555029
#&gt;  [99] 0.1994326 0.4502742
#&gt; ---
#&gt; Absolute mean prediction error for each test set sample:
#&gt; [[1]]
#&gt;  [1]  1.64303655  0.52011507  1.80854804  0.27397761  4.74956789  0.44629475
#&gt;  [7]  0.79169171  1.91379941  3.35535996  2.81224380  2.23429390  2.89076073
#&gt; [13]  3.63862526  2.06531267  0.02057142  2.37172067  3.77518783  0.06653200
#&gt; [19]  2.54091920 17.04505989 17.74111346 15.63028636 19.07322256 12.14444444
#&gt; [25] 13.47934542 26.66510076 17.56803835 16.40768031 16.12908791 11.63782760
#&gt; [31]  7.27102422 16.62814072 16.44266661 17.45445217  8.08445076 17.83988220
#&gt; [37] 16.20108244  8.59473896  6.46024697 17.38330300 10.75670060 16.10928232
#&gt; [43]  8.84556663  6.40069954 17.66521305 11.94471131  8.04489715  6.72829346
#&gt; [49] 12.03159357 12.12656206
#&gt; 
#&gt; [[2]]
#&gt;  [1]  7.7276977  6.4515322 16.3416316 14.9570771  5.8148937  6.5178686
#&gt;  [7]  5.4141705 12.0412141  5.3343060  3.8448102 50.5925090 43.2792335
#&gt; [13] 47.0495280 44.4870893 47.3907448 42.2172564 52.5109564 46.5100741
#&gt; [19] 35.3594474 51.3289567 40.6284944 34.9017403 37.9975198 46.9363116
#&gt; [25] 42.4828167 34.1432397 31.4379864  0.1598946  1.2285287  3.4387596
#&gt; [31]  2.5998681  2.0466946  1.6515350  0.5737215  6.4005967  1.4795442
#&gt; [37]  5.2505980  7.0705691  0.7380260  1.4650057  3.8265141  0.9642647
#&gt; [43]  4.9180170  0.8425861  4.4169974 21.3537888  8.1734897 18.3690604
#&gt; [49]  7.1580738 10.6882846 16.3983330 15.0391111 15.8656240 16.6585201
#&gt; [55] 11.6737871 17.6182522 15.4769111
#&gt; 
#&gt; ---
#&gt; Prediction error SD for each test set sample:
#&gt; [[1]]
#&gt;  [1]   0.3596039   0.5174330   0.3132285   0.4025266   0.6773989   0.7645284
#&gt;  [7]   0.2699342   0.4986699   0.5196797   0.6583661   0.5064671   0.6387197
#&gt; [13]   0.5558690   0.6644286   0.5514427   0.7468375   0.6590804   0.8022008
#&gt; [19]   0.9228705  10.5752370  10.2752284   9.9589388   9.8375996   8.3561926
#&gt; [25]   7.2133433 122.0345508   8.9746241   8.9429357   8.5709829   9.0489806
#&gt; [31]   8.9606253   8.0759433   8.4103867   8.7198550   8.8555998   8.6352266
#&gt; [37]   8.3004547   8.6926192   8.6903975   7.8540780   8.5612989   8.4854419
#&gt; [43]   8.6851603   8.6477987   8.4224476   8.4400320   8.4896967   8.4710084
#&gt; [49]   8.5112512   8.2280276
#&gt; 
#&gt; [[2]]
#&gt;  [1]   8.5145616   8.4351298   8.2979095   7.9663877   8.7604161   8.3078283
#&gt;  [7]   8.2832620   7.1765371   8.1994560   8.2560986  26.1133479  22.5989017
#&gt; [13]  22.7097367  24.2358951  23.3639503  23.5884342  23.9680502  23.9028739
#&gt; [19]  23.8078600 109.8994900  23.6529433  23.6103401  22.9554590  23.3605597
#&gt; [25]  23.4216036  23.2214309  23.0696251   0.2952354   0.7379650   0.7801094
#&gt; [31]   0.5737839   0.6185236   0.3859655   0.4399115   0.6153185   0.1476588
#&gt; [37]   0.3462843 127.5572600   0.2746705   0.3577757   0.3401878   0.2021822
#&gt; [43]   0.3247426   0.3653422   0.7725961  10.0879845   8.7176687   9.3278581
#&gt; [49]   8.8962413   8.9781230   8.9703347   7.5937235   8.7881098   8.7250009
#&gt; [55]   8.8113154   8.8570657   8.6448928
#&gt; </div><div class='input'><span class='fu'>plot</span>(<span class='no'>ad</span>)</div><div class='img'><img src='enpls.ad-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'># the interactive plot requires a HTML viewer
</div><span class='co'># NOT RUN {</span>
<span class='fu'>plot</span>(<span class='no'>ad</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"interactive"</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Nan Xiao &lt;<a href='https://nanx.me'>https://nanx.me</a>&gt;

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Nan Xiao, Dong-Sheng Cao, Miao-Zhu Li, Qing-Song Xu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
